var _createClass=function(){function i(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,s){return t&&i(e.prototype,t),s&&i(e,s),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function o(f,n,a){function l(t,e){if(!n[t]){if(!f[t]){var s="function"==typeof require&&require;if(!e&&s)return s(t,!0);if(h)return h(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=n[t]={exports:{}};f[t][0].call(r.exports,function(e){return l(f[t][1][e]||e)},r,r.exports,o,f,n,a)}return n[t].exports}for(var h="function"==typeof require&&require,e=0;e<a.length;e++)l(a[e]);return l}({1:[function(e,t,s){function i(){var t=0,e=$("#hot_offers .view .text");e.each(function(){var e=$(this).height();t<e&&(t=e)}),e.height(t)}i(),jQuery.expr.filters.offscreen=function(e){var t=e.getBoundingClientRect();return t.x+t.width<0||t.y+t.height<0||t.x>window.innerWidth||t.y>window.innerHeight};var r=(_createClass(o,[{key:"setMinX",value:function(){this.minX=-this.$elems.offerItems.length*this.w_element+this.w+this.delta}},{key:"setOfferItems",value:function(){this.$elems.offerItems=this.$elems.offers.find(this.itemSelector)}},{key:"insertHotOffers",value:function(e){var t=this;t.$elems.offers.fadeOut("fast",function(){t.$elems.offers.empty().html(e).css("margin-left","2px").fadeIn("fast",function(){i(),t.setOfferItems(),t.setMinX(),t.renderControls()})})}},{key:"getOffersData",value:function(t,s,i){var r=this;$.get("/offer/slider-by-city.html?cityId="+s,function(e){""!==e?(t.insertHotOffers(e),t.chache[s]=e,r.$elem.css({overflow:"hidden"})):(r.$elems.offers.empty().hide(),r.$elem.css({overflow:"unset"})),t.setCityInSelect(s,i)})}},{key:"setCityInSelect",value:function(e,t){var s=$('.hot_fake_option[data-city="'+e+'"]');0<s.length&&($(".fake_select_text span").text(t),$(".hot_fake_option_checked").removeClass("hot_fake_option_checked"),s.addClass("hot_fake_option_checked"))}},{key:"renderControls",value:function(){this.isMoveOfferAvailable()?(this.$controls.removeClass("hidden"),this.$elems.offersWrapper.removeClass("fixed-offer")):(this.$controls.addClass("hidden"),this.$elems.offersWrapper.addClass("fixed-offer"))}},{key:"isMoveOfferAvailable",value:function(){return 375*this.$elem.find(".offer-item").length>document.documentElement.clientWidth}},{key:"handlers",value:function(){var r=this;"country"!==this.mode&&(this.$elems.offers.mousemove(function(e){r.isMoveOfferAvailable()&&r.offersMove(e)}).mouseout(function(){clearTimeout(r.timer),r.$elems.arrOffers.removeClass("moves")}),this.$elems.arrOffers.on("click",function(){var e=-1;$(this).hasClass("right")&&(e=1);var t=Math.abs(parseFloat(r.$elems.offers.css("margin-left")))/r.w_element,s=Math.ceil(t);-1===e&&(s=Math.floor(t)),t==s&&(s+=e);var i=-1*r.w_element*s;0==i&&(i=2),0<i?(r.$elems.arrOffersLeft.addClass("disabled"),r.$elems.arrOffersRight.removeClass("disabled")):i<r.minX&&(r.$elems.arrOffersRight.addClass("disabled"),r.$elems.arrOffersLeft.removeClass("disabled")),(i=1<i?0:i<r.minX?r.minX:i)<r.minX&&(i=r.minX),r.$elems.offers.animate({marginLeft:i+"px"})}),r.element.bind("touchstart",function(e){var t=e.originalEvent;r.touchStart(t.touches[0])}),r.element.bind("touchmove",function(e){var t=e.originalEvent;r.touchMove(t.touches[0])}),r.element.bind("touchend",function(e){r.touchEnd(e.originalEvent.touches[0])})),$("div.hot_fake_select").on("click","div.fake_select_text",function(){$(".hot_fake_options").toggle()}),$("div.hot_fake_options").on("click","div.hot_fake_option",function(){var e,t;$("div.hot_fake_options").hide(),$(this).hasClass("hot_fake_option_checked")||(e=$(this).data("city"),t=$(this).text(),r.chache[e]?(r.insertHotOffers(r.chache[e]),r.setCityInSelect(e,t)):r.getOffersData(r,e,t))}),$("body").on("click",function(e){0===$(e.target).closest(".hot_fake_select").length&&$(".hot_fake_options").hide()}),$(window).on("onLocation",function(e,t){t.id&&0!==$("div.hot_fake_options .hot_fake_option[data-city="+t.id+"]").length&&r.getOffersData(r,t.id,t.name)})}},{key:"touchEnd",value:function(){clearTimeout(this.timer),this.$elems.arrOffers.removeClass("moves")}},{key:"touchMove",value:function(e){clearTimeout(this.timer);var t=-1*(this.touchStartPos-e.pageX);this.touchStartPos=e.pageX;var s=parseFloat(this.$elems.offers.css("margin-left"))+t;this.$elems.arrOffers.removeClass("moves disabled"),0<s?(s=0,this.$elems.arrOffersLeft.addClass("disabled")):s<this.minX?(s=this.minX,this.$elems.arrOffersRight.addClass("disabled")):t<0?this.$elems.arrOffersRight.addClass("moves"):0<t&&this.$elems.arrOffersLeft.addClass("moves"),this.$elems.offers.css("margin-left",s+"px")}},{key:"touchStart",value:function(e){clearTimeout(this.timer),this.touchStartPos=e.pageX}},{key:"offersMove",value:function(e){var t=this;clearTimeout(this.timer);var s,i,r,o=this.$elem.offset();e.pageY-o.top>this.mouseMoveHeight||(s=e.pageX-o.left,-.5<(i=(this.w/2-s)/50)&&i<.5&&(i=0),r=parseFloat(this.$elems.offers.css("margin-left"))+i,this.$elems.arrOffers.removeClass("moves disabled"),0<r?(r=0,this.$elems.arrOffersLeft.addClass("disabled")):r<this.minX?(r=this.minX,this.$elems.arrOffersRight.addClass("disabled")):i<-.5?this.$elems.arrOffersRight.addClass("moves"):.5<i&&this.$elems.arrOffersLeft.addClass("moves"),this.$elems.offers.css("margin-left",r+"px"),this.timer=setTimeout(function(){t.offersMove(e)},10))}}]),o);function o(e,t,s){_classCallCheck(this,o),this.mode=e,this.code=t,this.timer=null,this.$elem=$("mainSelector"in s?s.mainSelector:"#hot_offers"),this.$controls=this.$elem.find(".hot-offers-widget-controls"),this.$elems={arrOffers:$("arrowSelector"in s?s.arrowSelector:".arr_offers"),arrOffersLeft:$("leftArrowSelector"in s?s.leftArrowSelector:".arr_offers.left"),arrOffersRight:$("rightArrowSelector"in s?s.rightArrowSelector:".arr_offers.right"),offers:this.$elem.find("itemsSelector"in s?s.itemsSelector:".items"),offerItems:[],offersWrapper:this.$elem.find(".hot-offers-widget-list")},this.itemSelector="itemSelector"in s?s.itemSelector:".view",this.setOfferItems(),this.element=this.$elem.find(".hotOffers"),this.offset=this.element.offset(),this.touchStartPos=0,this.w=this.element.width(),this.w_element="w_element"in s?s.w_element:305,this.delta="delta"in s?s.delta:14,this.mouseMoveHeight="mouseMoveHeight"in s?s.mouseMoveHeight:195,this.minX=null,this.chache=[],this.setMinX(),this.handlers(),this.renderControls()}window.hotSlider=r},{}]},{},[1]);
//# sourceMappingURL=hot-slider.min.js.map
